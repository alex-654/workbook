## 13.1. СИСТЕМА TCP/IP и ИНТЕРНЕТ

https://datatracker.ietf.org/doc/html/rfc1122  
https://datatracker.ietf.org/doc/html/rfc1123

internet service provider - ISP

Предельный размер пакета устанавливается на канальном уровне и называется максимальной единицей передач
Maximum Transfer Unit - MTU

IP address (Internet Protocol address)

### NAT

NAT (network address translation) Под роутером объединяется частная\локальная сеть (LAN) внутри которой каждому
устройству определяется IP из трех возможных сетей выделенных для приватных сетей. Обычно 192.168/16

1) 10.0.0.0 — 10.255.255.255 с маской 255.0.0.0 (или кратко 10/8).
2) 172.16.0.0 — 172.31.255.255 с маской 255.240.0.0 (или кратко 172.16/12).
3) 192.168.0.0 — 192.168.255.255 (или кратко 192.168/16).

rfc1918
Далее роутер смотри таблицу маршрутизации и если пакет с адресом во внешнюю сеть, то роутер создает/просматривает таблицу внутренних адресов, добавляет в
заголовок данные для обратной трансляции и отправляет этот пакет в сеть со своим внешним ip который выдал ему ISP


#### Carrier-Grade NAT (CGN) devices
100.64.0.0/10, i.e. IP addresses from 100.64.0.0 to 100.127.255.255  (rfc6598)
Например, ISP Билайн предоставляет промежуточный адрес домашнему роутеру в квартире.


Show IP routing table on Linux
```
netstat -rn 
route -n
ip route show
```


```
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.50.1    0.0.0.0         UG    600    0        0 wlp0s20f3
172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 docker0
172.18.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-6aac0d6ebcb0
172.19.0.0      0.0.0.0         255.255.255.0   U     0      0        0 br-a00141f7beee
172.20.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-466169605d6b
172.21.0.0      0.0.0.0         255.255.255.0   U     0      0        0 br-603944bce09b
172.22.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-a569a1c60650
172.23.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-632deda6770e
172.27.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-ec754ec7f889
192.168.50.0    0.0.0.0         255.255.255.0   U     600    0        0 wlp0s20f3

```

Чтобы отправить пакет по адресу 0.0.0.0 (Destination) нужно отправлять эти пакеты через шлюз (Gateway) 192.168.50.1

### Трассировка шлюзов

команды mtr| traceroute


DNS — это распределённая иерархическая база данных доменов.