### Типы баз данных

- По типу используемой модели данных
- По степени обеспечения консистентности full ACID -> BASE
- По типу доступа

#### Модели данных

- NoSQL - key/value, document store, JSON store, BigTable (columnar
  store)
- Традиционные: XML, Object-oriented, Relational
- Специализированные: Graph databases

Колоночный БД - ClickHouse, Касандра
Применения - аналитика, запросы на чтение.
Данные хранятся на диске не по строкам, а по колонкам, за счет того происходит оптимизация работы диска.
Обеспечивается оптимальное хранение, за счет отрезания null значений.

key/value - Redis, Memcached, Riak

#### Консистентность

- Транзакционная модель не подходит для долгих операций

Бизнесу нужно расставить приоритеты. Выбрать какой уровень консистентность они готовы поддерживать.
Например
Амазон - The customers must be able to shop!
Выбор пал на “согласованность в конечном счете” (eventual consistency)
Данные согласовываются на этапе покупки, в другой период они могут быть не согласованны.
Например товар может закончиться, но он будет отображаться в корзине.

Hotel, airline reservation and distributed queuing as a case for long-running operations which can naturally result in
inconsistency.
Можно купить билет которого нет или забронировать отель который уже куплен кем то другим.

Теорема CAP в любой реализации распределённых вычислений возможно обеспечить не более двух из трёх следующих свойств -
consistency, availability, partition tolerance.

#### Хранение данных
In-memory index, B-trees, LSM trees
Колоночные, строковые.
Возможность делить данные на быстрое и медленное хранилище для кейсов бизнесса.
Кейс смотрим стену там 100k сообщений, смотрят обычно первые 10-20 сообщений.

Языки программирования не учитывают как хранятся данные на компьютере.
В каком виде памяти и как ее быстрее оттуда получить.
Т.к. языки наследуются от довольно древних языков либо слишком верхнеуровневые.
В идеале получать данные из кешей процессора.
Например, кеш процессора Store Buffer/Load Buffer может загрузить из оперативы не одну ячейку, а 10 штуку, и потом выгрузить в РАМ
Memory latency изменилось не сильно по сравнению с ее размерами и скоростью процессора.
Memory bandwidth объем передаваемой памяти
Аналогия труба с газом, ширина трубы это бандвич, скорость потока газа это латенси.
Т.е. лучше читать реже, но большими блоками.
Сеть может быть быстрее чем работа с дисками.

Minimize the number of disk accesses!

16 мб примерно уровень кеша L3.
64 кб регистры

Чтение с диска по 1 мб. оптимально, что эффективно загрузить процессор.


