Каждый процесс получает свое адресное пространство которое делится на три сегмента

- code (машинные инструкции скомпилированной программы)
- stack (call stack информацию о вызываемых функциях, их аргументах и каждой локальной переменной в функциях)
- heap (все остальное)

// offtop
Стэк как структуры данных. Извлекать и добавлять данные быстрее. Нужно только сдвинуть стэк вперед или назад.
Куча это не структура данных, а просто название.
Доступ и добавление данных рандомный и динамический. Больше гибкости, но больше затрат на чтение и запись.
// offtop end

Это адресное пространство имеет свой адрес в виртуальной памяти. Пользовательские процессы обращаются только к
виртуальной памяти.
Далее OC c помощью блока управления памятью (MMU) и ЦПУ мапит (Переадресация) эту память на физическую
Для маппинга используются специальные переменные base (начальный адрес) и bounds (размер)
Эти значения записываются в таблицу процессов — PCB (Process Control Block).
Физический адрес = виртуальный адрес + base

### Перераспределение памяти

ОС может поменять адресное пространство процесса в физической памяти.
Для этого она просто меняет данные base в таблице PCB.
С точки зрения пользовательского процесса ничего не меняется, он обращается к тому же адресу виртуальной памяти.

base и bounds можно выставит на каждый сегмент памяти code, stack and heap
Тогда система будет гибче и каждый сегмент памяти можно менять отдельно и не одним куском.
Так же при таком раскладе блок code можно использовать совместно если например заппущенно оновременно два одинаковых
процесса.
Это делается за счет выставления флагов. MMU вместе в base и bounds регистрирует permission flag.
Shared Objects — это одно из крупнейших преимуществ Unix- и Linux-систем, обеспечивающее экономию памяти.

Главный недостаток сегментов заключается в том, что из-за них физическая память сильно фрагментируется.
ОС приходится поддерживать список свободных участков и управлять ими.

### С этим может помочь Разбиение памяти на страницы

Каждое размещение, которое ядро делает в физической памяти, имеет фиксированный размер. То есть страницы — это области
физической памяти фиксированного размера, ничего более. Это сильно облегчает задачу управления свободным объёмом и
избавляет от фрагментации

Страница — это мельчайшая и неделимая единица памяти, которой может оперировать ОС.
ОС хранит таблицу страниц процесса (process page table), в которой представлены взаимосвязи между страницей виртуальной
памяти процесса и страницей физической памяти (страничный кадр, page frame).

У каждого процесса есть своя таблица страниц, в которой представлена переадресация. Здесь уже используются не значения
границ области, а номер виртуальной страницы (VPN, virtual page number) и сдвиг (offset).

